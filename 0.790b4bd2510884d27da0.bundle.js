(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{699:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"GESTURE_CONTROLLER",function(){return GESTURE_CONTROLLER}),__webpack_require__.d(__webpack_exports__,"createGesture",function(){return createGesture});var _sPassive,_chunk_84f6bf13_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(115),GestureController=(__webpack_require__(13),function(){function GestureController(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}return GestureController.prototype.createGesture=function(config){return new GestureDelegate(this,this.newID(),config.name,config.priority||0,!!config.disableScroll)},GestureController.prototype.createBlocker=function(opts){return void 0===opts&&(opts={}),new BlockerDelegate(this,this.newID(),opts.disable,!!opts.disableScroll)},GestureController.prototype.start=function(gestureName,id,priority){return this.canStart(gestureName)?(this.requestedStart.set(id,priority),!0):(this.requestedStart.delete(id),!1)},GestureController.prototype.capture=function(gestureName,id,priority){if(!this.start(gestureName,id,priority))return!1;var requestedStart=this.requestedStart,maxPriority=-1e4;if(requestedStart.forEach(function(value){maxPriority=Math.max(maxPriority,value)}),maxPriority===priority){this.capturedId=id,requestedStart.clear();var event=new CustomEvent("ionGestureCaptured",{detail:{gestureName:gestureName}});return document.dispatchEvent(event),!0}return requestedStart.delete(id),!1},GestureController.prototype.release=function(id){this.requestedStart.delete(id),this.capturedId===id&&(this.capturedId=void 0)},GestureController.prototype.disableGesture=function(gestureName,id){var set=this.disabledGestures.get(gestureName);void 0===set&&(set=new Set,this.disabledGestures.set(gestureName,set)),set.add(id)},GestureController.prototype.enableGesture=function(gestureName,id){var set=this.disabledGestures.get(gestureName);void 0!==set&&set.delete(id)},GestureController.prototype.disableScroll=function(id){this.disabledScroll.add(id),1===this.disabledScroll.size&&document.body.classList.add(BACKDROP_NO_SCROLL)},GestureController.prototype.enableScroll=function(id){this.disabledScroll.delete(id),0===this.disabledScroll.size&&document.body.classList.remove(BACKDROP_NO_SCROLL)},GestureController.prototype.canStart=function(gestureName){return void 0===this.capturedId&&!this.isDisabled(gestureName)},GestureController.prototype.isCaptured=function(){return void 0!==this.capturedId},GestureController.prototype.isScrollDisabled=function(){return this.disabledScroll.size>0},GestureController.prototype.isDisabled=function(gestureName){var disabled=this.disabledGestures.get(gestureName);return!!(disabled&&disabled.size>0)},GestureController.prototype.newID=function(){return this.gestureId++,this.gestureId},GestureController}()),GestureDelegate=function(){function GestureDelegate(ctrl,id,name,priority,disableScroll){this.id=id,this.name=name,this.disableScroll=disableScroll,this.priority=1e6*priority+id,this.ctrl=ctrl}return GestureDelegate.prototype.canStart=function(){return!!this.ctrl&&this.ctrl.canStart(this.name)},GestureDelegate.prototype.start=function(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)},GestureDelegate.prototype.capture=function(){if(!this.ctrl)return!1;var captured=this.ctrl.capture(this.name,this.id,this.priority);return captured&&this.disableScroll&&this.ctrl.disableScroll(this.id),captured},GestureDelegate.prototype.release=function(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))},GestureDelegate.prototype.destroy=function(){this.release(),this.ctrl=void 0},GestureDelegate}(),BlockerDelegate=function(){function BlockerDelegate(ctrl,id,disable,disableScroll){this.id=id,this.disable=disable,this.disableScroll=disableScroll,this.ctrl=ctrl}return BlockerDelegate.prototype.block=function(){if(this.ctrl){if(this.disable)for(var _i=0,_a=this.disable;_i<_a.length;_i++){var gesture=_a[_i];this.ctrl.disableGesture(gesture,this.id)}this.disableScroll&&this.ctrl.disableScroll(this.id)}},BlockerDelegate.prototype.unblock=function(){if(this.ctrl){if(this.disable)for(var _i=0,_a=this.disable;_i<_a.length;_i++){var gesture=_a[_i];this.ctrl.enableGesture(gesture,this.id)}this.disableScroll&&this.ctrl.enableScroll(this.id)}},BlockerDelegate.prototype.destroy=function(){this.unblock(),this.ctrl=void 0},BlockerDelegate}(),BACKDROP_NO_SCROLL="backdrop-no-scroll",GESTURE_CONTROLLER=new GestureController,addEventListener=function(el,eventName,callback,opts){var add,remove,listenerOpts=supportsPassive(el)?{capture:!!opts.capture,passive:!!opts.passive}:!!opts.capture;return el.__zone_symbol__addEventListener?(add="__zone_symbol__addEventListener",remove="__zone_symbol__removeEventListener"):(add="addEventListener",remove="removeEventListener"),el[add](eventName,callback,listenerOpts),function(){el[remove](eventName,callback,listenerOpts)}},supportsPassive=function(node){if(void 0===_sPassive)try{var opts=Object.defineProperty({},"passive",{get:function(){_sPassive=!0}});node.addEventListener("optsTest",function(){},opts)}catch(e){_sPassive=!1}return!!_sPassive},getDocument=function(node){return node instanceof Document?node:node.ownerDocument},createGesture=function(config){var hasCapturedPan=!1,hasStartedPan=!1,hasFiredStart=!0,isMoveQueued=!1,finalConfig=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},config),canStart=finalConfig.canStart,onWillStart=finalConfig.onWillStart,onStart=finalConfig.onStart,onEnd=finalConfig.onEnd,notCaptured=finalConfig.notCaptured,onMove=finalConfig.onMove,threshold=finalConfig.threshold,detail={type:"pan",startX:0,startY:0,startTimeStamp:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,timeStamp:0,event:void 0,data:void 0},pan=function(direction,thresh,maxAngle){var radians=maxAngle*(Math.PI/180),isDirX="x"===direction,maxCosine=Math.cos(radians),threshold=thresh*thresh,startX=0,startY=0,dirty=!1,isPan=0;return{start:function(x,y){startX=x,startY=y,isPan=0,dirty=!0},detect:function(x,y){if(!dirty)return!1;var deltaX=x-startX,deltaY=y-startY,distance=deltaX*deltaX+deltaY*deltaY;if(distance<threshold)return!1;var hypotenuse=Math.sqrt(distance),cosine=(isDirX?deltaX:deltaY)/hypotenuse;return isPan=cosine>maxCosine?1:cosine<-maxCosine?-1:0,dirty=!1,!0},isGesture:function(){return 0!==isPan},getDirection:function(){return isPan}}}(finalConfig.direction,finalConfig.threshold,finalConfig.maxAngle),gesture=GESTURE_CONTROLLER.createGesture({name:config.gestureName,priority:config.gesturePriority,disableScroll:config.disableScroll}),fireOnMove=function(){hasCapturedPan&&(isMoveQueued=!1,onMove&&onMove(detail))},tryToCapturePan=function(){return!(gesture&&!gesture.capture())&&(hasCapturedPan=!0,hasFiredStart=!1,detail.startX=detail.currentX,detail.startY=detail.currentY,detail.startTimeStamp=detail.timeStamp,onWillStart?onWillStart(detail).then(fireOnStart):fireOnStart(),!0)},fireOnStart=function(){onStart&&onStart(detail),hasFiredStart=!0},reset=function(){hasCapturedPan=!1,hasStartedPan=!1,isMoveQueued=!1,hasFiredStart=!0,gesture.release()},pointerUp=function(ev){var tmpHasCaptured=hasCapturedPan,tmpHasFiredStart=hasFiredStart;reset(),tmpHasFiredStart&&(calcGestureData(detail,ev),tmpHasCaptured?onEnd&&onEnd(detail):notCaptured&&notCaptured(detail))},pointerEvents=function(el,pointerDown,pointerMove,pointerUp,options){var rmTouchStart,rmTouchMove,rmTouchEnd,rmTouchCancel,rmMouseStart,rmMouseMove,rmMouseUp,lastTouchEvent=0,handleTouchStart=function(ev){lastTouchEvent=Date.now()+2e3,pointerDown(ev)&&(!rmTouchMove&&pointerMove&&(rmTouchMove=addEventListener(el,"touchmove",pointerMove,options)),rmTouchEnd||(rmTouchEnd=addEventListener(el,"touchend",handleTouchEnd,options)),rmTouchCancel||(rmTouchCancel=addEventListener(el,"touchcancel",handleTouchEnd,options)))},handleMouseDown=function(ev){lastTouchEvent>Date.now()||pointerDown(ev)&&(!rmMouseMove&&pointerMove&&(rmMouseMove=addEventListener(getDocument(el),"mousemove",pointerMove,options)),rmMouseUp||(rmMouseUp=addEventListener(getDocument(el),"mouseup",handleMouseUp,options)))},handleTouchEnd=function(ev){stopTouch(),pointerUp&&pointerUp(ev)},handleMouseUp=function(ev){stopMouse(),pointerUp&&pointerUp(ev)},stopTouch=function(){rmTouchMove&&rmTouchMove(),rmTouchEnd&&rmTouchEnd(),rmTouchCancel&&rmTouchCancel(),rmTouchMove=rmTouchEnd=rmTouchCancel=void 0},stopMouse=function(){rmMouseMove&&rmMouseMove(),rmMouseUp&&rmMouseUp(),rmMouseMove=rmMouseUp=void 0},stop=function(){stopTouch(),stopMouse()},setDisabled=function(disabled){disabled?(rmTouchStart&&rmTouchStart(),rmMouseStart&&rmMouseStart(),rmTouchStart=rmMouseStart=void 0,stop()):(rmTouchStart||(rmTouchStart=addEventListener(el,"touchstart",handleTouchStart,options)),rmMouseStart||(rmMouseStart=addEventListener(el,"mousedown",handleMouseDown,options)))};return{setDisabled:setDisabled,stop:stop,destroy:function(){setDisabled(!0),pointerUp=pointerMove=pointerDown=void 0}}}(finalConfig.el,function(ev){var timeStamp=now(ev);return!(hasStartedPan||!hasFiredStart)&&(updateDetail(ev,detail),detail.startX=detail.currentX,detail.startY=detail.currentY,detail.startTimeStamp=detail.timeStamp=timeStamp,detail.velocityX=detail.velocityY=detail.deltaX=detail.deltaY=0,detail.event=ev,(!canStart||!1!==canStart(detail))&&(gesture.release(),!!gesture.start()&&(hasStartedPan=!0,0===threshold?tryToCapturePan():(pan.start(detail.startX,detail.startY),!0))))},function(ev){hasCapturedPan?!isMoveQueued&&hasFiredStart&&(isMoveQueued=!0,calcGestureData(detail,ev),Object(_chunk_84f6bf13_js__WEBPACK_IMPORTED_MODULE_0__.n)(fireOnMove)):(calcGestureData(detail,ev),pan.detect(detail.currentX,detail.currentY)&&(pan.isGesture()&&tryToCapturePan()||abortGesture()))},pointerUp,{capture:!1}),abortGesture=function(){reset(),pointerEvents.stop(),notCaptured&&notCaptured(detail)};return{setDisabled:function(disabled){disabled&&hasCapturedPan&&pointerUp(void 0),pointerEvents.setDisabled(disabled)},destroy:function(){gesture.destroy(),pointerEvents.destroy()}}},calcGestureData=function(detail,ev){if(ev){var prevX=detail.currentX,prevY=detail.currentY,prevT=detail.timeStamp;updateDetail(ev,detail);var currentX=detail.currentX,currentY=detail.currentY,timeDelta=(detail.timeStamp=now(ev))-prevT;if(timeDelta>0&&timeDelta<100){var velocityX=(currentX-prevX)/timeDelta,velocityY=(currentY-prevY)/timeDelta;detail.velocityX=.7*velocityX+.3*detail.velocityX,detail.velocityY=.7*velocityY+.3*detail.velocityY}detail.deltaX=currentX-detail.startX,detail.deltaY=currentY-detail.startY,detail.event=ev}},updateDetail=function(ev,detail){var x=0,y=0;if(ev){var changedTouches=ev.changedTouches;if(changedTouches&&changedTouches.length>0){var touch=changedTouches[0];x=touch.clientX,y=touch.clientY}else void 0!==ev.pageX&&(x=ev.pageX,y=ev.pageY)}detail.currentX=x,detail.currentY=y},now=function(ev){return ev.timeStamp||Date.now()}}}]);
//# sourceMappingURL=0.790b4bd2510884d27da0.bundle.js.map